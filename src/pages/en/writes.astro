---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from 'astro:content';
import Title from '../../components/Title.svelte';
import Links from '../../components/Links.svelte';
import Link from '../../components/Link.svelte';
import Article from '../../components/Article.svelte';

export const prerender = true;

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).filter(
  (post) => (post.slug.startsWith('en/'))
);
---

<Layout title="My writings" image="/logos/50.png" desc="Drawing by Puurply.">
  <Title
  title='There is all of my english writings.'
  subtitle={`Actually ${posts.length} writings.`}
  />

  <Links>
    <Link
      text='< Back'
      href='/en/'
    />
    <Link
      text='RSS'
      href='/en/rss.xml'
      newTab={true}
    />
  </Links>
  
    {
      posts.map((post) => (
        <Article url={post.slug} type={post.data.type} date={post.data.pubDate.toLocaleDateString()} title={post.data.title} description={post.data.description} />
      ))
    }
</Layout>